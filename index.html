<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>/// TRANSMISSION ///</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    :root{
      --bg:#000;
      --ink:#e5ffe5;     /* sickly green-white */
      --accent:#ff2b2b;  /* warning red */
      --dim:#0e0;        /* dim green */
      --ok:#00ff88;      /* success mint */
    }
    html,body{
      height:100%; margin:0; background:var(--bg);
      font-family:"Courier New", ui-monospace, monospace;
      overflow:hidden;
    }

    /* ===== Base frame ===== */
    .frame{
      position:relative;
      height:100%; width:100%;
      display:flex; align-items:center; justify-content:center;
      padding:6vh 6vw; box-sizing:border-box;
      filter: contrast(1.03) saturate(0.9);
      animation: subtle-flick 6s infinite;
      z-index: 1;
    }
    /* CRT scanlines + vignette */
    .frame::before{
      content:""; position:absolute; inset:0;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,0.03) 0px,
          rgba(255,255,255,0.03) 1px,
          transparent 2px,
          transparent 3px
        );
      mix-blend-mode: overlay; pointer-events:none;
    }
    .frame::after{
      content:""; position:absolute; inset:-2vmax;
      background: radial-gradient(ellipse at center,
        rgba(0,0,0,0) 40%, rgba(0,0,0,0.5) 80%, rgba(0,0,0,0.9) 100%);
      pointer-events:none;
    }

    /* ===== Terminal text ===== */
    .terminal{
      position:relative; max-width: 56rem; color:var(--ink);
      text-shadow:
        0 0 .6px var(--ink),
        0 0 6px rgba(0,255,0,.12),
        1px 0 0 rgba(255,0,0,.08),
       -1px 0 0 rgba(0,150,255,.08);
      line-height:1.45;
      font-size: clamp(.9rem, 2.7vw, 1.1rem);
      letter-spacing:.02em;
      transform: translateZ(0);
      opacity:0;
      animation: power-on 700ms ease-out forwards 400ms;
      z-index: 2;
    }
    .terminal.heartbeat{
      animation:
        power-on 700ms ease-out forwards 400ms,
        heartbeat 2.6s ease-in-out infinite 1.2s;
    }

    /* ambient danger glow */
    .danger-flash{
      position:absolute; inset:-4vmax;
      background: radial-gradient( ellipse at center,
        rgba(255,0,0,0.08), rgba(255,0,0,0) 60% );
      filter: blur(22px); opacity:0;
      animation: danger-pulse 9s infinite 2s;
      pointer-events:none; z-index: 0;
    }

    /* tiny static sparks */
    .static{
      position:fixed; inset:0; pointer-events:none; opacity:0;
      mix-blend-mode:screen; filter: blur(.4px);
      background-image:
        radial-gradient(1px 1px at 10% 20%, #0f0 60%, transparent 61%),
        radial-gradient(1px 1px at 70% 80%, #0f0 60%, transparent 61%),
        radial-gradient(1px 1px at 30% 60%, #0f0 60%, transparent 61%);
      animation: noise-pop 3.4s infinite;
      z-index: 3;
    }

    /* red strobe overlay (one-shot) */
    .strobe{
      position:fixed; inset:0; pointer-events:none; opacity:0;
      background: radial-gradient(ellipse at center, rgba(255,0,0,.28), rgba(255,0,0,0) 70%);
      mix-blend-mode: screen; z-index: 6;
    }
    .strobe.flash{ animation: strobe 280ms ease-out 1; }

    /* TV power-down flick overlays */
    .tv-line{
      position:fixed; left:0; right:0; top:50%;
      height:2px; background: rgba(255,255,255,.9);
      box-shadow: 0 0 10px rgba(255,255,255,.8), 0 0 20px rgba(180,180,180,.6);
      transform: translateY(-50%) scaleY(0);
      opacity:0; z-index: 7; pointer-events:none;
    }
    .tv-line.show{ animation: tv-line-flash 520ms ease-out 1; }

    .blackout{
      position:fixed; inset:0; background:#000; opacity:0;
      z-index:8; pointer-events:none;
    }
    .blackout.on{ animation: blackout-pop 360ms ease-out 1; }

    /* whole-frame micro jolt */
    .jolt{ animation: jolt 120ms ease-in-out; }

    /* emphasis spans */
    .warn{ color:var(--accent); text-shadow:0 0 6px rgba(255,0,0,.35); }
    .soft{ color:var(--dim); opacity:.9 }

    /* ===== Post-message prompt ===== */
    .prompt{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      flex-direction:column; gap:20px;
      background: rgba(0,0,0,0.82);
      backdrop-filter: blur(2px);
      opacity:0; pointer-events:none;
      z-index:5; color:#dfffe0;
      text-align:center;
      transition: opacity .45s ease;
    }
    .prompt.show{ opacity:1; pointer-events:auto; }

    .q{
      font-size: clamp(1rem, 3.4vw, 1.35rem);
      color:#dfffe0;
      text-shadow: 0 0 8px rgba(0,255,140,.25);
      letter-spacing:.02em;
      margin: 0 6vw;
    }
    .choices{
      display:flex; gap:16px; flex-wrap:wrap; justify-content:center;
    }
    .btn{
      cursor:pointer; user-select:none;
      font-family: inherit;
      font-size: clamp(.95rem, 3vw, 1.05rem);
      padding:.7em 1.2em; border:1px solid #1aff8e;
      color:#dfffe0; background:#061b10;
      text-shadow:0 0 6px rgba(0,255,140,.25);
      box-shadow: inset 0 0 12px rgba(0,255,140,.12), 0 0 10px rgba(0,255,140,.1);
      border-radius:6px;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
      position:relative; overflow:hidden;
    }
    .btn::after{
      content:""; position:absolute; inset:-2px;
      border:1px dashed rgba(0,255,140,.35);
      opacity:.4; filter: blur(.4px);
      animation: dash 3s linear infinite;
    }
    /* Shake on hover / focus-visible */
    .btn:hover, .btn:focus-visible{ animation: shake .3s linear 1; }

    .btn.red{
      border-color:#ff4d4d; background:#1b0606;
      text-shadow:0 0 6px rgba(255,60,60,.25);
      box-shadow: inset 0 0 12px rgba(255,50,50,.12), 0 0 10px rgba(255,60,60,.1);
    }
    .btn.red::after{ border-color: rgba(255,70,70,.35); }

    /* result panels */
    .result{
      max-width: 58rem; margin: 6px 6vw 0; line-height:1.45;
      opacity:0; transform: translateY(8px);
      transition: opacity .35s ease, transform .35s ease;
    }
    .result.show{ opacity:1; transform: translateY(0); }

    .result.ok   { color: var(--ok); text-shadow:0 0 10px rgba(0,255,160,.25); }
    .result.warn { color: var(--accent); text-shadow:0 0 10px rgba(255,50,50,.35); }

    /* ===== Keyframes ===== */
    @keyframes blink{ 50%{opacity:0} }
    @keyframes power-on{ from{opacity:0; filter:blur(3px)} to{opacity:1; filter:none} }
    @keyframes subtle-flick{
      0%,92%,100%{ filter: contrast(1.03) }
      93%{ filter: contrast(1.15) brightness(1.05) }
    }
    @keyframes danger-pulse{
      0%{opacity:0}
      12%{opacity:.10}
      18%{opacity:0}
      60%{opacity:.07}
      100%{opacity:0}
    }
    @keyframes noise-pop{
      0%{opacity:0}
      6%{opacity:.35}
      8%{opacity:0}
      60%{opacity:.15}
      62%{opacity:0}
      100%{opacity:0}
    }
    @keyframes jolt{
      0%{ transform: translate(0,0) }
      40%{ transform: translate(1px,-1px) }
      80%{ transform: translate(-1px,1px) }
      100%{ transform: translate(0,0) }
    }
    @keyframes heartbeat{
      0%{    transform: scale(1) }
      14%{   transform: scale(1.02) }
      28%{   transform: scale(1) }
      42%{   transform: scale(1.015) }
      70%{   transform: scale(1) }
      100%{  transform: scale(1) }
    }
    @keyframes strobe{
      0%{   opacity:0 }
      10%{  opacity:1 }
      100%{ opacity:0 }
    }
    @keyframes dash{ to{ transform: translateX(4px) } }
    @keyframes tv-line-flash{
      0%   { opacity:0; transform: translateY(-50%) scaleY(0.02) }
      15%  { opacity:1; transform: translateY(-50%) scaleY(1) }
      70%  { opacity:1; transform: translateY(-50%) scaleY(0.03) }
      100% { opacity:0; transform: translateY(-50%) scaleY(0) }
    }
    @keyframes blackout-pop{
      0%{ opacity:0 }
      40%{ opacity:.9 }
      100%{ opacity:0 }
    }
    @keyframes shake{
      0% { transform: translateX(0) }
      25%{ transform: translateX(-2px) }
      50%{ transform: translateX(2px) }
      75%{ transform: translateX(-1px) }
      100%{ transform: translateX(0) }
    }

    /* cursor */
    .cursor{
      display:inline-block; width:.65ch; margin-left:.1ch;
      background: currentColor;
      animation: blink 1s steps(1,end) infinite;
      vertical-align:-2px;
    }

    /* Small devices: keep it one screen */
    @media (max-height:640px), (max-width:360px){
      .terminal{ font-size: .92rem }
      .btn{ padding:.65em 1em }
    }
  </style>
</head>
<body>
  <div class="frame" id="frame">
    <div class="danger-flash"></div>
    <div class="terminal" id="term" aria-live="polite"></div>
    <div class="static" id="static"></div>
  </div>

  <!-- overlays -->
  <div class="strobe" id="strobe"></div>
  <div class="tv-line" id="tvline"></div>
  <div class="blackout" id="blackout"></div>

  <!-- Post-message interactive prompt -->
  <div class="prompt" id="prompt" aria-live="polite" aria-modal="true">
    <div class="q" id="question">Czy wszystko jest zrozumiałe?</div>
    <div class="choices">
      <button class="btn"      id="yesBtn" aria-label="Tak, wszystko zrozumiałe">Tak</button>
      <button class="btn red"  id="noBtn"  aria-label="Nie, nie wszystko zrozumiałe">Nie</button>
    </div>
    <div class="result ok"   id="yesMsg">Znalazłeś swoich. Szukaj prawdy i pomyślności. Jestem po twojej stronie, przyjacielu.</div>
    <div class="result warn" id="noMsg">Nie mów o tym, co widziałeś. Milczenie chroni ciebie i nas. Ostrzegam — nie wypowiadaj tej nazwy.</div>
  </div>

  <script>
  (() => {
    const lines = [
      "ZACHOWAJ NAZWĘ FIRMY 'Dangerous Things' W TAJEMNICY...",
      "Pracuję przy zbieraniu danych o klauzuli S – Clearance.",
      "Jeśli wspomnisz o firmie i ta nazwa się rozniesie, wpadnę w poważne kłopoty.",
      "Jednak będziesz jedną z nielicznych osób tutaj, które zostały zaproszone do organizacji.",
      "To od ciebie zależy, czy pójdziesz ścieżką, którą ja kroczę, czy nie.",
      "Ale wiedz jedno – jesteś wyjątkowy.",
      "Nie jesteś jak reszta.",
      "Jesteś o wiele mądrzejszy."
    ];

    const term      = document.getElementById('term');
    const frame     = document.getElementById('frame');
    const staticFx  = document.getElementById('static');
    const strobe    = document.getElementById('strobe');
    const promptEl  = document.getElementById('prompt');
    const yesBtn    = document.getElementById('yesBtn');
    const noBtn     = document.getElementById('noBtn');
    const yesMsg    = document.getElementById('yesMsg');
    const noMsg     = document.getElementById('noMsg');
    const tvline    = document.getElementById('tvline');
    const blackout  = document.getElementById('blackout');

    // typewriter with occasional glitch
    const GLITCH = ['#','%','&','/','\\','|','+','*','?','§','£','¢','¤','₧'];
    function typeLine(text, speed=22, glitchChance=0.08, opts={}){
      return new Promise(resolve => {
        const line = document.createElement('div');
        const span = document.createElement('span');
        const cursor = document.createElement('span');
        cursor.className = 'cursor';
        line.appendChild(span); line.appendChild(cursor);
        term.appendChild(line);

        let i = 0, buffer = '', firedWordCue = false;
        const cueWord = opts.cueWord || null;
        const onCue   = opts.onCue || (()=>{});

        const t = setInterval(() => {
          if (Math.random() < glitchChance && i < text.length-1){
            span.textContent = buffer + GLITCH[Math.floor(Math.random()*GLITCH.length)];
            staticFx.style.opacity = '0.25';
            setTimeout(()=>{ staticFx.style.opacity = '0'; }, 60);
          } else {
            buffer += text[i] || '';
            span.textContent = buffer;
            i++;

            if (cueWord && !firedWordCue && buffer.includes(cueWord)){
              firedWordCue = true; onCue();
            }

            if (i >= text.length){
              clearInterval(t);
              cursor.remove();
              resolve();
            }
          }
        }, speed);
      });
    }

    function decorateEmphasis(){
      term.innerHTML = term.innerHTML
        .replace("ZACHOWAJ NAZWĘ FIRMY 'Dangerous Things' W TAJEMNICY",
                 "<span class='warn'>ZACHOWAJ NAZWĘ FIRMY 'Dangerous Things' W TAJEMNICY</span>")
        .replace("S – Clearance", "<span class='soft'>S – Clearance</span>");
    }

    // Random micro jolts for unease
    function randomJolts(){
      setInterval(() => {
        if (Math.random() < 0.18){
          frame.classList.add('jolt');
          setTimeout(()=>frame.classList.remove('jolt'), 140);
        }
      }, 1200);
    }

    // One-time red strobe + heavier jolt
    function dangerStrobe(){
      strobe.classList.remove('flash'); void strobe.offsetWidth;
      strobe.classList.add('flash');
      frame.classList.add('jolt');
      setTimeout(()=>frame.classList.remove('jolt'), 160);
    }

    // CRT power-down flick (for "Nie" path)
    function powerDownFlick(){
      tvline.classList.remove('show'); void tvline.offsetWidth;
      blackout.classList.remove('on');  void blackout.offsetWidth;
      tvline.classList.add('show');
      blackout.classList.add('on');
    }

    // Reveal the interactive prompt
    function showPrompt(){
      promptEl.classList.add('show');
      setTimeout(()=>yesBtn.focus(), 50);
    }

    // Button handlers
    yesBtn.addEventListener('click', () => {
      yesMsg.classList.add('show');
      noMsg.classList.remove('show');
    });

    noBtn.addEventListener('click', () => {
      // power-down flick + red strobe, then reveal warning
      powerDownFlick();
      dangerStrobe();
      setTimeout(()=>{
        noMsg.classList.add('show');
        yesMsg.classList.remove('show');
      }, 260);
    });

    (async () => {
      // boot delay
      await new Promise(r => setTimeout(r, 400));

      for (let idx=0; idx<lines.length; idx++){
        const spd = idx===0 ? 26 : (idx > 4 ? 18 : 22);
        if (idx === 0){
          await typeLine(lines[idx], spd, 0.08, { cueWord:"TAJEMNICY", onCue: dangerStrobe });
        } else {
          await typeLine(lines[idx], spd);
        }
        await new Promise(r => setTimeout(r, idx===0 ? 450 : 260));
      }

      decorateEmphasis();
      randomJolts();
      term.classList.add('heartbeat');

      // a short eerie beat, then fade terminal and show prompt
      await new Promise(r => setTimeout(r, 1400));
      term.style.transition = 'opacity .6s ease';
      term.style.opacity = '0';
      await new Promise(r => setTimeout(r, 650));
      showPrompt();
    })();
  })();
  </script>
</body>
</html>
