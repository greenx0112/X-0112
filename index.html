<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>/// TRANSMISSION /// (Follow & Fade)</title>
<style>
  /* Reliable, minimal styling */
  html,body{margin:0;height:100%;background:#000;color:#e5ffe5;font-family:"Courier New",ui-monospace,monospace}

  /* Top-aligned scrolling viewport that always follows the newest line */
  .viewport{position:relative;height:100vh;box-sizing:border-box;padding:24px;overflow:auto}
  .term{width:100%;max-width:56rem;margin:0 auto;line-height:1.45;letter-spacing:.02em}
  .line{white-space:pre-wrap;margin:0 0 6px 0}
  .cursor{display:inline-block;width:.6ch;height:1.05em;background:currentColor;vertical-align:-2px;opacity:.7}
  .hint{color:#7aff7a;margin-bottom:10px}
  .sig{color:#00ff66;text-shadow:0 0 10px rgba(0,255,102,.6),0 0 22px rgba(0,255,102,.35)}

  /* Fade the scrambled line away smoothly */
  .fadeOut{opacity:0;transition:opacity 1600ms ease;}

  /* Final sigil area */
  .final{position:fixed;inset:0;background:#000;display:none;align-items:center;justify-content:center}
  .final.show{display:flex}
  .logoWrap{position:relative}
  .logo{width:min(44vw,360px);max-width:90vw}
  .halo{box-shadow:0 0 24px rgba(0,255,136,.55)}

  /* Multi-layer logo for chromatic glitch (legacy-safe) */
  .layer{position:absolute;inset:0}
  .layer.g g{stroke:#00ff88}
  .layer.r g{stroke:#ff5252}
  .layer.b g{stroke:#00c8ff}
  .layer.r{transform:translateX(-1px)}
  .layer.b{transform:translateX(1px)}

  /* Scanline & glitch animations (widely supported) */
  .scanline{position:absolute;left:0;right:0;height:2px;background:rgba(255,255,255,.9);
            box-shadow:0 0 10px rgba(255,255,255,.85),0 0 20px rgba(200,200,200,.6);opacity:0}

  @keyframes flicker{0%,100%{opacity:1}5%{opacity:.55}10%{opacity:.2}15%{opacity:.9}22%{opacity:.6}28%{opacity:.95}36%{opacity:.4}44%{opacity:1}60%{opacity:.7}78%{opacity:.3}}
  @keyframes jitter{0%{transform:translate(0,0)}20%{transform:translate(1px,-1px)}40%{transform:translate(-1px,1px)}60%{transform:translate(1px,0)}80%{transform:translate(-1px,0)}100%{transform:translate(0,0)}}
  @keyframes scan{0%{opacity:0;top:5%}10%{opacity:1}90%{opacity:1}100%{opacity:0;top:95%}}
  @keyframes pulseGlow{0%{text-shadow:0 0 8px rgba(0,255,102,.4),0 0 16px rgba(0,255,102,.35)}50%{text-shadow:0 0 26px rgba(0,255,102,.85),0 0 48px rgba(0,255,102,.6)}100%{text-shadow:0 0 8px rgba(0,255,102,.4),0 0 16px rgba(0,255,102,.35)}}

  .glitchFlicker{animation:flicker 1.4s infinite}
  .glitchJitter{animation:jitter .22s steps(2,end) infinite}
  .glowPulse{animation:pulseGlow .5s ease-in-out 1}
  .scanRun{animation:scan .45s ease-out 1}
  .burst{opacity:.75}

  /* Error box so problems are obvious */
  #err{position:fixed;left:0;right:0;bottom:0;background:#2b0000;color:#ffdede;font:14px/1.4 ui-monospace,monospace;padding:8px 12px;display:none;white-space:pre-wrap}
  #err b{color:#ff7b7b}
</style>
</head>
<body>

<div class="viewport" id="view">
  <div class="term" id="term">
    <div class="hint" id="bootHint">If you can read this, rendering works. Typing will begin shortly…</div>
  </div>
</div>

<!-- Final glitchy sigil -->
<div class="final" id="final">
  <div class="logoWrap halo" id="logoWrap" aria-label="Compass & Square">
    <!-- Green base -->
    <div class="layer g">
      <svg class="logo" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
          <path d="M100 20 L60 120" /><path d="M100 20 L140 120" /><circle cx="100" cy="20" r="8" />
          <path d="M60 140 L140 140 L140 160 L60 160 Z" />
          <path d="M120 100 a20 20 0 1 0 -40 0 a20 20 0 1 0 40 0" />
          <path d="M115 100 h-10" />
        </g>
      </svg>
    </div>
    <!-- Red/Cyan offset layers for chromatic glitch -->
    <div class="layer r">
      <svg class="logo" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
          <path d="M100 20 L60 120" /><path d="M100 20 L140 120" /><circle cx="100" cy="20" r="8" />
          <path d="M60 140 L140 140 L140 160 L60 160 Z" />
          <path d="M120 100 a20 20 0 1 0 -40 0 a20 20 0 1 0 40 0" />
          <path d="M115 100 h-10" />
        </g>
      </svg>
    </div>
    <div class="layer b">
      <svg class="logo" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
          <path d="M100 20 L60 120" /><path d="M100 20 L140 120" /><circle cx="100" cy="20" r="8" />
          <path d="M60 140 L140 140 L140 160 L60 160 Z" />
          <path d="M120 100 a20 20 0 1 0 -40 0 a20 20 0 1 0 40 0" />
          <path d="M115 100 h-10" />
        </g>
      </svg>
    </div>
    <div class="scanline" id="scanline"></div>
  </div>
</div>

<div id="err"></div>

<script>
/* Legacy-safe JS (no ES6) */
(function(){
  var view = document.getElementById('view');
  var term = document.getElementById('term');
  var bootHint = document.getElementById('bootHint');
  var final = document.getElementById('final');
  var logoWrap = document.getElementById('logoWrap');
  var scanline = document.getElementById('scanline');
  var errBox = document.getElementById('err');

  function showErr(msg){ try{ errBox.style.display='block'; errBox.innerHTML="<b>Runtime error</b>: "+String(msg);}catch(e){} }
  window.onerror=function(m){showErr(m)}; window.addEventListener('unhandledrejection',function(e){showErr(e&&e.reason?e.reason:'unhandled')});

  /* Text */
  var lines = [
"Honestly, to me it seems like another common case of mankind desperately searching for a fix.",
"",
"I mean, has iCloud subscription... And if it means affording, £5 - £7 on storage, then the counterpart must have spent the whole £70.",
"",
"I assume Ket; you had mentioned it. But remember that cheap flake can land at this price.",
"",
"And dealers don't sort with Five Notes. We all know that! ;)",
"",
"So, to me it looks like you gave £70... A deal offered, and went straight to an ATM, and withdrew all £70, to get the fix wanted.",
"",
"Otherwise, iCloud would have automatically taken that smaller amount. However, if he got a deal, then he wouldn't afford the subscription. Aha, sorry if it sounds brutal. But equally, a lot of men are like this.",
"",
"But, I may be wrong... However, I'll still look into more. As I said, pasted in some sites online, and as for email \"pwned\", which should cause the spontaneous entropy. However, I have more tucked up my sleeve, in some time.",
"",
"But it does take some time to prepare. However, life should be, \"hard to manage\"...",
"",
"But, that's why I made a song, called \"Hard To Manage\" to do with a \"Night Out just with the guy\" but the girl wanders off... And you aren't really going to want that in your life, so it seems to add up.",
"",
"I wouldn't put it past everything, with the rest you said. However, I've only just started. This goes on in the background. As once I get far enough, my bot will do the rest. And not chatgpt, my laptop has a built in bot I programmed.",
"",
"Don't worry, it's aight. ;)",
"",
"                  - x-X-x"
  ];

  /* Scroll helper (keeps viewport following the newest line) */
  function follow(){
    try{ view.scrollTop = view.scrollHeight; }catch(e){}
  }

  /* Typewriter */
  function typeLine(text, speed, className, cb){
    try{
      var line = document.createElement('div'); line.className='line';
      var span = document.createElement('span'); if(className){ span.className=className; }
      var cursor = document.createElement('span'); cursor.className='cursor';
      line.appendChild(span); line.appendChild(cursor); term.appendChild(line);
      follow();

      var i=0, t=setInterval(function(){
        try{
          if(i<=text.length){ span.textContent=text.substr(0,i); i++; follow(); }
          else{ clearInterval(t); if(cursor.parentNode) cursor.parentNode.removeChild(cursor); if(cb) cb(span, line); }
        }catch(e){ clearInterval(t); if(cb) cb(span,line); }
      }, speed);
    }catch(e){ if(cb) cb(null,null); }
  }

  /* Scramble then fade out */
  function scrambleNode(node, duration, done){
    duration = duration || 380;
    try{
      var text = node.textContent||''; var step=16, t=0;
      var chars="01█░▒▓<>[]{}()|/\\#%$&*+-=~^•·!?@";
      var timer=setInterval(function(){
        t+=step; var amt=Math.min(1, t/duration); var out="", cut=1-amt;
        for(var i=0;i<text.length;i++){
          var ch=text.charAt(i); out += (ch===' ')?'': ((i/text.length<cut)?ch:chars.charAt(Math.floor(Math.random()*chars.length)));
        }
        try{ node.textContent=out; }catch(e){}
        if(amt>=1){ clearInterval(timer); if(done) done(); }
      }, step);
    }catch(e){ if(done) done(); }
  }
  function fadeLine(lineEl){
    try{
      lineEl.className += ' fadeOut';
      // optional: remove from DOM after fade to keep DOM light
      setTimeout(function(){ try{ if(lineEl.parentNode) lineEl.parentNode.removeChild(lineEl); }catch(e){} }, 1700);
    }catch(e){}
  }

  /* Final sigil reveal + aggressive glitching */
  var glitchTimer=null, scanTimer=null;
  function revealLogo(){
    try{
      final.className='final show';
      logoWrap.className+=' glitchFlicker';
      glitchTimer=setInterval(function(){
        if(Math.random()<0.85){ addTempClass(logoWrap,'glitchJitter',160); }
        if(Math.random()<0.65){ addTempClass(logoWrap,'burst',120); }
        if(Math.random()<0.5){ addTempClass(logoWrap,'glowPulse',500); }
      },180);
      scanTimer=setInterval(function(){
        try{
          scanline.style.opacity='1'; scanline.style.top='5%';
          scanline.className='scanline scanRun';
          setTimeout(function(){ scanline.className='scanline'; scanline.style.opacity='0'; },480);
        }catch(e){}
      },700);
    }catch(e){}
  }
  function addTempClass(el, cls, ms){
    try{
      var c=el.className; if(c.indexOf(cls)===-1){ el.className=c+' '+cls; }
      setTimeout(function(){
        try{ el.className = el.className.replace(new RegExp('(?:^|\\s)'+cls+'(?:\\s|$)','g'),' ').replace(/\s+/g,' ').trim(); }catch(e){}
      }, ms||200);
    }catch(e){}
  }

  /* Sequence: read → scramble → fade → next */
  function run(){
    try{
      if(bootHint) bootHint.style.display='none';

      var idx=0;
      var readDelay=1500;     // readable pause
      var scrambleDur=380;    // scramble animation duration
      var fadeGap=200;        // small gap before fade
      var betweenGap=150;     // breath before next line

      function next(){
        if(idx>=lines.length){ setTimeout(revealLogo, 600); return; }

        var txt=lines[idx];
        var cleaned=txt.replace(/\s+/g,'');
        var isSig=(cleaned === "-x-X-x");
        var speed = isSig ? 50 : (idx===0 ? 80 : (idx>6 ? 55 : 68));

        typeLine(txt, speed, isSig ? 'sig' : '', function(span, lineEl){
          if(span && span.textContent && span.textContent.trim().length){
            // scramble after readable pause
            setTimeout(function(){
              scrambleNode(span, scrambleDur, function(){
                setTimeout(function(){ fadeLine(lineEl); }, fadeGap);
              });
            }, readDelay);
          }
          // schedule next line after read + scramble + fade
          setTimeout(next, readDelay + scrambleDur + fadeGap + betweenGap);
          idx++;
        });
      }
      next();
    }catch(e){ showErr(e.message||e); }
  }

  // Start after 1.5s
  setTimeout(run, 1500);
})();
</script>
</body>
</html>
